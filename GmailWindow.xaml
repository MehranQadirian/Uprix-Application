<Window x:Class="AppLauncher.GmailWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Send Feedback"
        Height="700" Width="400"
        Background="Transparent"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None" ResizeMode="NoResize"
        Loaded="Window_Loaded"
        AllowsTransparency="True">

    <!-- Window Chrome -->
    <WindowChrome.WindowChrome>
        <WindowChrome
            CornerRadius="15"
            CaptionHeight="0"
            ResizeBorderThickness="5"
            GlassFrameThickness="0"
            UseAeroCaptionButtons="False"/>
    </WindowChrome.WindowChrome>
    <Window.Resources>
        <Style x:Key="PathHoverStyle" TargetType="Path">
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType=Button}}" 
                     Value="True">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation To="#FFE4FF8E"
                                        Duration="0:0:0.1"
                                        Storyboard.TargetProperty="(Path.Fill).(SolidColorBrush.Color)"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                    <DataTrigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation To="OrangeRed"
                                        Duration="0:0:0.1"
                                        Storyboard.TargetProperty="(Path.Fill).(SolidColorBrush.Color)"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.ExitActions>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="ReloadPathHover" TargetType="Path">
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType=Button}}" 
                     Value="True">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation To="White"
                                        Duration="0:0:0.1"
                                        Storyboard.TargetProperty="(Path.Fill).(SolidColorBrush.Color)"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                    <DataTrigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation To="#FF00F1FF"
                                        Duration="0:0:0.1"
                                        Storyboard.TargetProperty="(Path.Fill).(SolidColorBrush.Color)"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.ExitActions>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <Style TargetType="Button" x:Key="AnimatedNavButton">
            <Setter Property="Background" Value="#2E2E3E"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                CornerRadius="50"
                                Background="Transparent">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            <Border.Effect>
                                <DropShadowEffect x:Name="dropShadow" Color="#FF454a35" Opacity="0" ShadowDepth="0" BlurRadius="5"/>
                            </Border.Effect>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="dropShadow"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="0.5" Duration="0:0:0.1"/>

                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="dropShadow"
                                                             Storyboard.TargetProperty="Opacity"
                                                             To="0" Duration="0:0:0.1"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style TargetType="Button" x:Key="SendButtonStyle">
            <Setter Property="Background" Value="#2E2E3E"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                    CornerRadius="10"
                    Background="#FF454a35">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            <Border.Effect>
                                <DropShadowEffect x:Name="dropShadow" 
                                      Color="#FF454a35" 
                                      Opacity="0" 
                                      ShadowDepth="0" 
                                      BlurRadius="5"/>
                            </Border.Effect>
                        </Border>
                        <ControlTemplate.Triggers>
                            <!-- Hover Trigger -->
                            <Trigger Property="IsMouseOver" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <!-- Animate shadow opacity -->
                                            <DoubleAnimation Storyboard.TargetName="dropShadow"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="0.5" Duration="0:0:0.1"/>
                                            <DoubleAnimation Storyboard.TargetName="border"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="0.8" Duration="0:0:0.08"/>
                                            <!-- Animate background color -->
                                            <ColorAnimation Storyboard.TargetName="border"
                                                Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                To="#FF6F9100"
                                                Duration="0:0:0.08"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <!-- Animate shadow opacity back -->
                                            <DoubleAnimation Storyboard.TargetName="dropShadow"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="0" Duration="0:0:0.1"/>
                                            <DoubleAnimation Storyboard.TargetName="border"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="1" Duration="0:0:0.08"/>
                                            <!-- Animate background color back -->
                                            <ColorAnimation Storyboard.TargetName="border"
                                                Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                To="#FF454a35"
                                                Duration="0:0:0.08"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid >
        <!-- پس‌زمینه -->
        <Border Background="Transparent"/>

        <!-- کارت مرکزی -->
        <Border CornerRadius="0,25,0,25"
                Background="White"
                Margin="5"
                BorderBrush="#FF4E4E4E"
                BorderThickness="0.5">
            <Border.Effect>
                <DropShadowEffect BlurRadius="25"
                                  ShadowDepth="0"
                                  Color="#FFC2FF00"
                                  Opacity="0.05"/>
            </Border.Effect>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="70"/>
                    <!-- Header -->
                    <RowDefinition/>
                    <!-- Body -->
                    <RowDefinition Height="70"/>
                    <!-- Footer -->
                </Grid.RowDefinitions>

                <!-- Header -->
                <Border x:Name="HeaderPanel"
                        Grid.Row="0"
                        Background="#FF454a35"
                        CornerRadius="0,25,0,25"
                        Margin="5"
                        VerticalAlignment="Center"
                        MouseLeftButtonDown="HeaderPanel_MouseLeftButtonDown">
                    <DockPanel LastChildFill="True" Margin="10">
                        <!-- Power Button -->
                        <Button Width="40" Height="40"
                                Background="Transparent" BorderThickness="0"
                                DockPanel.Dock="Right"
                                Click="CloseWindow_Click"
                                ToolTip="Close"
                                Style="{StaticResource AnimatedNavButton}">
                            <Path Data="M61.44,0c33.933,0,61.439,27.507,61.439,61.439 s-27.506,61.439-61.439,61.439C27.507,122.879,0,95.372,0,61.439S27.507,0,61.44,0L61.44,0z M73.451,39.151 c2.75-2.793,7.221-2.805,9.986-0.027c2.764,2.776,2.775,7.292,0.027,10.083L71.4,61.445l12.076,12.249 c2.729,2.77,2.689,7.257-0.08,10.022c-2.773,2.765-7.23,2.758-9.955-0.013L61.446,71.54L49.428,83.728 c-2.75,2.793-7.22,2.805-9.986,0.027c-2.763-2.776-2.776-7.293-0.027-10.084L51.48,61.434L39.403,49.185 c-2.728-2.769-2.689-7.256,0.082-10.022c2.772-2.765,7.229-2.758,9.953,0.013l11.997,12.165L73.451,39.151L73.451,39.151z"
                                  Style="{StaticResource PathHoverStyle}"
                                  Stretch="Uniform"
                                  Fill="OrangeRed"
                                  Margin="7.5"/>
                        </Button>
                        <Path x:Name="Connection" 
                            Stretch="Uniform"
                            Width="35" Height="35"
                            DockPanel.Dock="Left"
                            Margin="2"/>
                        <Button x:Name="ReloadButton"
                            Width="20" Height="20"
                                VerticalAlignment="Center"
                                Margin="-40,0,0,0" BorderBrush="Transparent"
                                BorderThickness="0"
                                Background="Transparent"
                                Visibility="Hidden"
                                Click="ReloadButton_Click"
                                Style="{StaticResource AnimatedNavButton}">
                            <Path Data="M83.91,26.34a43.78,43.78,0,0,0-22.68-7,42,42,0,0,0-24.42,7,49.94,49.94,0,0,0-7.46,6.09,42.07,42.07,0,0,0-5.47,54.1A49,49,0,0,0,30,94a41.83,41.83,0,0,0,18.6,10.9,42.77,42.77,0,0,0,21.77.13,47.18,47.18,0,0,0,19.2-9.62,38,38,0,0,0,11.14-16,36.8,36.8,0,0,0,1.64-6.18,38.36,38.36,0,0,0,.61-6.69,8.24,8.24,0,1,1,16.47,0,55.24,55.24,0,0,1-.8,9.53A54.77,54.77,0,0,1,100.26,108a63.62,63.62,0,0,1-25.92,13.1,59.09,59.09,0,0,1-30.1-.25,58.45,58.45,0,0,1-26-15.17,65.94,65.94,0,0,1-8.1-9.86,58.56,58.56,0,0,1,7.54-75,65.68,65.68,0,0,1,9.92-8.09A58.38,58.38,0,0,1,61.55,2.88,60.51,60.51,0,0,1,94.05,13.3l-.47-4.11A8.25,8.25,0,1,1,110,7.32l2.64,22.77h0a8.24,8.24,0,0,1-6.73,9L82.53,43.31a8.23,8.23,0,1,1-2.9-16.21l4.28-.76Z"
                                  Stretch="Uniform"
                                  Fill="#FF00F1FF"
                                  Width="20" Height="20"
                                  Style="{StaticResource ReloadPathHover}"/>
                        </Button>
                        <!-- Title -->
                        <StackPanel Margin="-5,0,0,0"
                                    VerticalAlignment="Center"
                                   HorizontalAlignment="Center">
                            <TextBlock Text="Send Feedback"
                                   Foreground="White"
                                   FontSize="30"
                                   FontFamily="Roboto"
                                   FontWeight="Black"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"/>
                            <Label Content="Via Gmail"
                                   FontSize="14" FontFamily="Vazirmatn"
                                   HorizontalContentAlignment="Center"
                                   VerticalContentAlignment="Center"
                                   Margin="-15" Foreground="#FF7AA000"/>
                        </StackPanel>
                        
                    </DockPanel>
                </Border>
                <Label Content="Check you internet!"
                       Foreground="OrangeRed"
                       Grid.Row="1" HorizontalAlignment="Center"
                       VerticalAlignment="Top"
                       FontFamily="Roboto"
                       FontWeight="Light"
                       FontStyle="Italic"
                       x:Name="lbCheckInternet"
                       Visibility="Hidden"/>
                <!-- Body -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15" VerticalAlignment="Center">
                        <!-- Subject -->
                        <Grid Margin="10">
                            <TextBox x:Name="GmailBox"
                                     Height="40"
                                     FontSize="16"
                                     Padding="5"
                                     Background="Transparent"
                                     BorderBrush="#bdc3c7"
                                     BorderThickness="0,0,0,1"
                                     Foreground="#2c3e50"
                                     TextChanged="GmailBox_TextChanged"
                                     GotFocus="TextBox_GotFocus"
                                     LostFocus="TextBox_LostFocus"/>

                            <TextBlock x:Name="GmailLabel"
                                       Text="Gmail"
                                       Margin="5,0,0,0"
                                       VerticalAlignment="Center"
                                       IsHitTestVisible="False">
                                <TextBlock.RenderTransform>
                                    <TranslateTransform/>
                                </TextBlock.RenderTransform>
                                <TextBlock.Foreground>
                                    <SolidColorBrush Color="Gray"/>
                                </TextBlock.Foreground>
                            </TextBlock>
                        </Grid>
                        <StackPanel x:Name="GmailValidationMessage"
            Orientation="Horizontal"
            Margin="10,-9,0,0"
            VerticalAlignment="Center"
            IsHitTestVisible="False">

                            <!-- آیکون -->
                            <Path x:Name="GmailValidationIcon"
          Width="15" Height="15"
          Stretch="Uniform"
          VerticalAlignment="Center"
          Margin="0,0,10,0"
          Fill="Gray"
          Data="M57.85,3.61a3.61,3.61,0,1,1,7.21,0V27.45a3.61,3.61,0,0,1-7.21,0V3.61ZM29.42,13.15a3.6,3.6,0,0,1,6.23-3.61L47.57,30.19a3.6,3.6,0,1,1-6.22,3.61L29.42,13.15ZM9.57,35.62a3.59,3.59,0,0,1,3.58-6.22L33.8,41.32a3.59,3.59,0,1,1-3.58,6.22L9.57,35.62ZM3.61,65a3.61,3.61,0,1,1,0-7.21H27.45a3.61,3.61,0,0,1,0,7.21Zm9.54,28.43a3.6,3.6,0,1,1-3.61-6.23L30.19,75.31a3.6,3.6,0,1,1,3.61,6.22L13.15,93.46Zm22.47,19.85a3.59,3.59,0,0,1-6.22-3.58L41.32,89.08a3.59,3.59,0,1,1,6.22,3.58L35.62,113.31Zm29.41,6a3.61,3.61,0,1,1-7.21,0V95.43a3.61,3.61,0,0,1,7.21,0v23.84Zm28.43-9.54a3.6,3.6,0,0,1-6.23,3.61L75.31,92.69a3.6,3.6,0,0,1,6.22-3.61l11.93,20.65Zm19.85-22.47a3.59,3.59,0,0,1-3.58,6.22L89.08,81.56a3.59,3.59,0,1,1,3.58-6.22l20.65,11.92Zm6-29.41a3.61,3.61,0,1,1,0,7.21H95.43a3.61,3.61,0,0,1,0-7.21Zm-9.54-28.43a3.6,3.6,0,0,1,3.61,6.23L92.69,47.57a3.6,3.6,0,0,1-3.61-6.22l20.65-11.93ZM87.26,9.57a3.59,3.59,0,1,1,6.22,3.58L81.56,33.8a3.59,3.59,0,1,1-6.22-3.58L87.26,9.57Z" />
                            <TextBlock x:Name="GmailValidationText"
               Text="Status..."
               VerticalAlignment="Center"
               Foreground="Gray"/>
                        </StackPanel>

                        <!-- Subject -->
                        <Grid Margin="10,20">
                            <TextBox x:Name="SubjectBox"
                                     Height="40"
                                     FontSize="16"
                                     Padding="5"
                                     Background="Transparent"
                                     BorderBrush="#bdc3c7"
                                     BorderThickness="0,0,0,1"
                                     Foreground="#2c3e50"
                                     GotFocus="TextBox_GotFocus"
                                     LostFocus="TextBox_LostFocus"/>

                            <TextBlock x:Name="SubjectLabel"
                                       Text="Subject"
                                       Margin="5,0,0,0"
                                       VerticalAlignment="Center"
                                       IsHitTestVisible="False">
                                <TextBlock.RenderTransform>
                                    <TranslateTransform/>
                                </TextBlock.RenderTransform>
                                <TextBlock.Foreground>
                                    <SolidColorBrush Color="Gray"/>
                                </TextBlock.Foreground>
                            </TextBlock>
                        </Grid>

                        <!-- Message -->
                        <Grid Margin="10,20">
                            <TextBox x:Name="MessageBox"
                                     Height="140"
                                     FontSize="16"
                                     Padding="5"
                                     AcceptsReturn="True"
                                     TextWrapping="Wrap"
                                     Background="Transparent"
                                     BorderBrush="#bdc3c7"
                                     BorderThickness="0,0,0,1"
                                     Foreground="#2c3e50"
                                     GotFocus="TextBox_GotFocus"
                                     LostFocus="TextBox_LostFocus"/>

                            <TextBlock x:Name="MessageLabel"
                                       Text="Message"
                                       Margin="5,5,0,0"
                                       VerticalAlignment="Top"
                                       IsHitTestVisible="False">
                                <TextBlock.RenderTransform>
                                    <TranslateTransform/>
                                </TextBlock.RenderTransform>
                                <TextBlock.Foreground>
                                    <SolidColorBrush Color="Gray"/>
                                </TextBlock.Foreground>
                            </TextBlock>
                        </Grid>
                        <StackPanel Margin="10,0,10,0" Orientation="Horizontal">
                            <Border Width="200" Height="150" CornerRadius="15" Margin="5">
                                <Border.Clip>
                                    <RectangleGeometry Rect="0,0,200,150" RadiusX="10" RadiusY="10"/>
                                </Border.Clip>
                                <Image x:Name="SelectedImagePreview"
                                        Stretch="UniformToFill"
                                       Visibility="Collapsed"
                                       HorizontalAlignment="Stretch"
                                        VerticalAlignment="Stretch"/>
                            </Border>
                            <Button x:Name="btnSelectImage"
                                    Content="Select Image"
                                    Width="120" Height="35"
                                    Click="btnSelectImage_Click" 
                                    Background="#FF454a35"
                                    Foreground="White"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    Style="{StaticResource SendButtonStyle}"/>
                        </StackPanel>
                    </StackPanel>

                </ScrollViewer>

                <!-- Footer -->
                <Border Grid.Row="2" Background="White" CornerRadius="0,0,25,25">
                    <Grid>
                        <Button Content="Send"
                                Width="160" Height="45"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontSize="16" FontWeight="Bold"
                                Background="#FF454a35"
                                Foreground="#FFF"
                                BorderThickness="0"
                                Cursor="Hand" Click="btnSend_Click"
                                Style="{StaticResource SendButtonStyle}">
                            <Button.Effect>
                                <DropShadowEffect BlurRadius="10" ShadowDepth="0" Color="Black" Opacity="0.2"/>
                            </Button.Effect>
                        </Button>
                    </Grid>
                </Border>
                <Border Grid.Row="0" Grid.RowSpan="3"
              Panel.ZIndex="999" Visibility="Collapsed"
                        x:Name="OverlayPanel" 
                        CornerRadius="0,25,0,25">
                    <Grid 
              Background="#80000000"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch"
                      >
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                            <TextBlock x:Name="WaitingText"
                           Text="Waiting to send..."
                           FontSize="24"
                           FontWeight="Bold"
                           Foreground="White"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"/>
                        </StackPanel>

                        <Grid.Triggers>
                            <EventTrigger RoutedEvent="Grid.Loaded">
                                <BeginStoryboard x:Name="WaitingStoryboard" >
                                    <Storyboard RepeatBehavior="Forever" AutoReverse="True">
                                        <DoubleAnimation Storyboard.TargetName="WaitingText"
                                             Storyboard.TargetProperty="Opacity"
                                             From="1" To="0.3"
                                             Duration="0:0:1"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Grid.Triggers>
                    </Grid>
                </Border>
            </Grid>
        </Border>
    </Grid>
</Window>
